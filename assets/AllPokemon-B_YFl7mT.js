import{r as b,c as w,j as a,L as S,a as y,u as N,b as F}from"./index-C5mZwNUz.js";import{S as j,j as L,F as A,a as C}from"./FilterErrorMessage-Bj8jb8ls.js";import{u as T,a as I,b as _,c as E,F as M}from"./Footer-BqRsB6pE.js";import{u as $,a as q}from"./CollapsingPanel-C--FDvbs.js";import{P as z}from"./PokemonTypesDisplay-CKs748aF.js";const R=s=>{const{getUrlParam:e}=$(),p=e("generation")??"",t=e("type")??"",i=!!e("onlyStarred"),m=e("q")??"",{data:l,isLoading:k}=T(p),{data:n,isLoading:u}=I(t),{starredPokemonIds:d}=q(),r=b.useMemo(()=>{if(s)return l!=null&&l.length&&(n!=null&&n.length)?l.filter(c=>new Set(n.map(x=>x.id)).has(c.id)):l!=null&&l.length?l:n!=null&&n.length?s.filter(c=>new Set(n.map(x=>x.id)).has(c.id)):s},[s,l,n]),o=b.useMemo(()=>{if(r)return i?r==null?void 0:r.filter(c=>d.includes(c.id)):r},[r,i,d]);return{pokemonList:b.useMemo(()=>{if(o)return m.trim().length?o==null?void 0:o.filter(c=>c.name.includes(m.toLowerCase().trim())):o},[o,m]),isLoading:k||u,isFiltered:!!(p||t||i||m)}},v=b.memo(s=>{const e=w.c(20),{pokemon:p}=s,{id:t,name:i}=p,{data:m}=_(t),[l,k]=b.useState(!0),n=`/pokedex/pokemon/${t}`,u=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/home/${t}.png`;let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=()=>k(!1),e[0]=d):d=e[0];let r;e[1]!==i||e[2]!==u?(r=a.jsx("img",{src:u,alt:i,onLoad:d,className:"aspect-square w-full object-contain text-transparent"}),e[1]=i,e[2]=u,e[3]=r):r=e[3];let o;e[4]!==l?(o=l?a.jsx("div",{className:"absolute top-0 aspect-square w-full rounded-sm bg-slate-100 transition-colors group-hover:bg-slate-200 dark:bg-slate-800 dark:group-hover:bg-slate-700",children:a.jsx(S,{size:8})}):null,e[4]=l,e[5]=o):o=e[5];let g;e[6]!==i?(g=a.jsx("h1",{className:"mb-1 text-xl font-bold text-nowrap capitalize max-md:px-1",children:i}),e[6]=i,e[7]=g):g=e[7];const c=m==null?void 0:m.types;let x;e[8]!==c?(x=a.jsx(z,{types:c,className:"-mx-6 scale-75 gap-1 @min-[180px]/card:-mx-7 @min-[200px]/card:-mx-3 @min-[200px]/card:scale-90 @min-[200px]/card:gap-2 @min-[235px]/card:mx-0 @min-[235px]/card:scale-100"}),e[8]=c,e[9]=x):x=e[9];let h;e[10]!==g||e[11]!==x?(h=a.jsxs("div",{className:"p-2 md:p-4",children:[g,x]}),e[10]=g,e[11]=x,e[12]=h):h=e[12];let f;e[13]!==h||e[14]!==r||e[15]!==o?(f=a.jsxs("article",{className:"group @container/card relative rounded-sm border border-slate-400/40 bg-slate-100 shadow-lg transition-colors hover:bg-slate-200 hover:shadow-xl dark:bg-slate-800 dark:shadow-none dark:hover:bg-slate-700 dark:hover:shadow-none",children:[r,o,h]}),e[13]=h,e[14]=r,e[15]=o,e[16]=f):f=e[16];let P;return e[17]!==f||e[18]!==n?(P=a.jsx(y,{to:n,children:f}),e[17]=f,e[18]=n,e[19]=P):P=e[19],P});v.displayName="PokemonCard";const B=()=>{const s=w.c(17),{data:e,isLoading:p}=E(),{pokemonList:t,isLoading:i,isFiltered:m}=R(e);N(D)();const[l,k]=b.useState(!1);F(l);let n,u;s[0]===Symbol.for("react.memo_cache_sentinel")?(n=a.jsxs(j,{children:[a.jsx(j.Search,{itemType:"Pokémon"}),a.jsx(j.GenerationFilter,{}),a.jsx(j.TypeFilter,{}),a.jsx(j.OnlyStarredToggle,{}),a.jsx(j.ClearFilter,{})]}),u=a.jsx(C,{}),s[0]=n,s[1]=u):(n=s[0],u=s[1]);let d;s[2]!==i||s[3]!==p||s[4]!==t?(d=!p&&!i&&(t!=null&&t.length)?a.jsx(L,{totalCount:t.length,itemContent:c=>a.jsx(v,{pokemon:t[c]},t[c].name),useWindowScroll:!0,increaseViewportBy:{top:1e3,bottom:1e3},components:{Footer:G},readyStateChanged:c=>k(c),className:"w-full",listClassName:"grid grid-cols-2 gap-2 @min-[500px]/grid:gap-4 @min-[600px]/grid:grid-cols-3 @min-[800px]/grid:grid-cols-4 @min-[1000px]/grid:grid-cols-5 @min-[1200px]/grid:grid-cols-6"}):null,s[2]=i,s[3]=p,s[4]=t,s[5]=d):d=s[5];let r;s[6]!==l||s[7]!==i||s[8]!==p?(r=(p||i||!l)&&a.jsx("div",{className:"fixed top-0 flex h-screen w-full items-center justify-center bg-slate-50 dark:bg-slate-900",children:a.jsx(S,{size:24,displaysText:!0})}),s[6]=l,s[7]=i,s[8]=p,s[9]=r):r=s[9];let o;s[10]!==m||s[11]!==(t==null?void 0:t.length)?(o=!(t!=null&&t.length)&&m&&a.jsx("div",{className:"top-0 lg:fixed lg:h-screen",children:a.jsx(A,{itemType:"Pokémon"})}),s[10]=m,s[11]=t==null?void 0:t.length,s[12]=o):o=s[12];let g;return s[13]!==d||s[14]!==r||s[15]!==o?(g=a.jsxs("div",{className:"relative pt-18 sm:pt-24",children:[n,u,a.jsxs("section",{className:"@container/grid flex flex-col items-center p-4 max-sm:px-2 lg:absolute lg:right-0 lg:w-4/5 lg:max-w-[calc(100vw-248px)]",children:[d,r,o]})]}),s[13]=d,s[14]=r,s[15]=o,s[16]=g):g=s[16],g};function D(s){return s.resetPokemonDetailsPanels}function G(){return a.jsx(M,{className:"pb-4"})}export{B as default};

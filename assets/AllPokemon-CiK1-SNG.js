import{r as b,c as S,j as a,L as k,a as y,u as F,b as N}from"./index-D9AqJKAJ.js";import{S as P,Y as A,F as C,a as T}from"./FilterErrorMessage-C_9SBo4C.js";import{u as I,a as L,b as _,c as E,F as M}from"./Footer-Dv017TdT.js";import{u as $,a as q}from"./useStarredPokemon-rGl2gy5Y.js";import{P as z}from"./PokemonTypesDisplay-BRb9HsFT.js";const D=e=>{const{getUrlParam:s}=$(),x=s("generation")??"",t=s("type")??"",c=!!s("onlyStarred"),p=s("q")??"",{data:r,isLoading:j}=I(x),{data:n,isLoading:m}=L(t),{starredPokemonIds:f}=q(),l=b.useMemo(()=>{if(e)return r!=null&&r.length&&(n!=null&&n.length)?r.filter(o=>new Set(n.map(d=>d.id)).has(o.id)):r!=null&&r.length?r:n!=null&&n.length?e.filter(o=>new Set(n.map(d=>d.id)).has(o.id)):e},[e,r,n]),i=b.useMemo(()=>{if(l)return c?l==null?void 0:l.filter(o=>f.includes(o.id)):l},[l,c,f]);return{pokemonList:b.useMemo(()=>{if(i)return p.trim().length?i==null?void 0:i.filter(o=>o.name.includes(p.toLowerCase().trim())):i},[i,p]),isLoading:j||m,isFiltered:!!(x||t||c||p)}},v=b.memo(e=>{const s=S.c(20),{pokemon:x}=e,{id:t,name:c}=x,{data:p}=_(t),[r,j]=b.useState(!0),n=`/pokedex/pokemon/${t}`,m=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/home/${t}.png`;let f;s[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>j(!1),s[0]=f):f=s[0];let l;s[1]!==c||s[2]!==m?(l=a.jsx("img",{src:m,alt:c,decoding:"async",onLoad:f,className:"aspect-square w-full object-contain text-transparent"}),s[1]=c,s[2]=m,s[3]=l):l=s[3];let i;s[4]!==r?(i=r?a.jsx("div",{className:"absolute top-0 aspect-square w-full rounded-sm bg-slate-200 transition-[background-color] group-hover:bg-slate-300 dark:bg-slate-800 dark:group-hover:bg-slate-700",children:a.jsx(k,{size:8})}):null,s[4]=r,s[5]=i):i=s[5];let g;s[6]!==c?(g=a.jsx("h1",{className:"mb-1 text-xl font-bold text-nowrap capitalize max-md:px-1",children:c}),s[6]=c,s[7]=g):g=s[7];const o=p==null?void 0:p.types;let d;s[8]!==o?(d=a.jsx(z,{types:o,className:"-mx-6 scale-75 gap-1 @min-[180px]/card:-mx-7 @min-[200px]/card:-mx-3 @min-[200px]/card:scale-90 @min-[200px]/card:gap-2 @min-[235px]/card:mx-0 @min-[235px]/card:scale-100"}),s[8]=o,s[9]=d):d=s[9];let u;s[10]!==g||s[11]!==d?(u=a.jsxs("div",{className:"p-2 md:p-4",children:[g,d]}),s[10]=g,s[11]=d,s[12]=u):u=s[12];let h;s[13]!==u||s[14]!==l||s[15]!==i?(h=a.jsxs("article",{className:"group @container/card relative rounded-xl bg-slate-200 shadow-lg transition-[background-color_shadow] hover:bg-slate-300 hover:shadow-xl dark:bg-slate-800 dark:shadow-none dark:hover:bg-slate-700 dark:hover:shadow-none",children:[l,i,u]}),s[13]=u,s[14]=l,s[15]=i,s[16]=h):h=s[16];let w;return s[17]!==h||s[18]!==n?(w=a.jsx(y,{to:n,children:h}),s[17]=h,s[18]=n,s[19]=w):w=s[19],w});v.displayName="PokemonCard";const V=()=>{const e=S.c(22),{data:s,isLoading:x}=E(),{pokemonList:t,isLoading:c,isFiltered:p}=D(s),r=F(R);let j,n;e[0]!==r?(j=()=>r(),n=[r],e[0]=r,e[1]=j,e[2]=n):(j=e[1],n=e[2]),b.useEffect(j,n);const[m,f]=b.useState(!1);N(m);let l,i;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsxs(P,{children:[a.jsx(P.Search,{itemType:"Pokémon"}),a.jsx(P.GenerationFilter,{}),a.jsx(P.TypeFilter,{}),a.jsx(P.OnlyStarredToggle,{}),a.jsx(P.ClearFilter,{})]}),i=a.jsx(T,{}),e[3]=l,e[4]=i):(l=e[3],i=e[4]);let g;e[5]!==m||e[6]!==x||e[7]!==c||e[8]!==t?(g=!x&&!c&&(t!=null&&t.length)?a.jsxs(a.Fragment,{children:[a.jsx(A,{totalCount:t.length,itemContent:h=>a.jsx(v,{pokemon:t[h]},t[h].name),useWindowScroll:!0,increaseViewportBy:{top:1e3,bottom:1e3},readyStateChanged:h=>f(h),className:"w-full",listClassName:`grid grid-cols-2 gap-2 @min-[475px]/grid:gap-4
                @min-[580px]/grid:grid-cols-3 @min-[580px]/grid:gap-2 @min-[680px]/grid:gap-4
                @min-[800px]/grid:grid-cols-4 @min-[800px]/grid:gap-2 @min-[900px]/grid:gap-4
                @min-[1000px]/grid:grid-cols-5 @min-[1000px]/grid:gap-2 @min-[1080px]/grid:gap-4
                @min-[1250px]/grid:grid-cols-6 @min-[1250px]/grid:gap-2 @min-[1300px]/grid:gap-4
                @min-[1400px]/grid:grid-cols-7 @min-[1400px]/grid:gap-2 @min-[1500px]/grid:gap-4`}),m&&a.jsx(M,{})]}):null,e[5]=m,e[6]=x,e[7]=c,e[8]=t,e[9]=g):g=e[9];let o;e[10]!==m||e[11]!==x||e[12]!==c||e[13]!==(t==null?void 0:t.length)?(o=x||c||!m&&(t!=null&&t.length)?a.jsx("div",{className:"fixed top-0 flex h-screen w-full items-center justify-center bg-slate-100 dark:bg-slate-900",children:a.jsx(k,{size:24,displaysText:!0})}):null,e[10]=m,e[11]=x,e[12]=c,e[13]=t==null?void 0:t.length,e[14]=o):o=e[14];let d;e[15]!==p||e[16]!==(t==null?void 0:t.length)?(d=!(t!=null&&t.length)&&p&&a.jsx("div",{className:"top-0 lg:fixed lg:h-screen",children:a.jsx(C,{itemType:"Pokémon"})}),e[15]=p,e[16]=t==null?void 0:t.length,e[17]=d):d=e[17];let u;return e[18]!==g||e[19]!==o||e[20]!==d?(u=a.jsxs("div",{className:"relative sm:pt-24",children:[l,i,a.jsxs("section",{className:"@container/grid flex flex-col items-center p-4 max-sm:px-2 lg:absolute lg:right-0 lg:w-4/5 lg:max-w-[calc(100vw-248px)] lg:min-w-[calc(100vw-320px)] lg:pl-0",children:[g,o,d]})]}),e[18]=g,e[19]=o,e[20]=d,e[21]=u):u=e[21],u};function R(e){return e.resetPokemonDetailsPanels}export{V as default};

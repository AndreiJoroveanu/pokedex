import{Link as e,Loader_default as t,__toESM as n,require_compiler_runtime as r,require_jsx_runtime as i,require_react as a}from"./Loader-D8Mv-eKS.js";import{FilterErrorMessage_default as o,ScrollToTopButton_default as s,Sidebar_default as c,Yr as l,useScrollRestoration as u}from"./FilterErrorMessage-Cb6FPzMI.js";import{Footer_default as d,useAllPokemonByGen as f,useAllPokemonByType as p,useAllPokemonSpecies as m,usePokemon as h}from"./Footer-BVDUx6A5.js";import{useAppStore_default as g}from"./shallow-DlnzSQjn.js";import{useAllItemsParam as _,useStarredPokemon as v}from"./useStarredPokemon-Btx-5DP8.js";import{PokemonTypesDisplay_default as y}from"./PokemonTypesDisplay-DvRi28Ha.js";var b=n(r()),x=n(a());const S=e=>{let t=(0,b.c)(21),[n]=_(`generation`),[r]=_(`type`),[i]=_(`onlyStarred`),[a]=_(`q`),{data:o,isLoading:s}=f(n),{data:c,isLoading:l}=p(r),{starredPokemonIds:u}=v(),d;bb0:{if(!e){d=void 0;break bb0}if(o?.length&&c?.length){let e;if(t[0]!==o||t[1]!==c){let n;t[3]===c?n=t[4]:(n=e=>new Set(c.map(C)).has(e.id),t[3]=c,t[4]=n),e=o.filter(n),t[0]=o,t[1]=c,t[2]=e}else e=t[2];d=e;break bb0}if(o?.length){d=o;break bb0}if(c?.length){let n;if(t[5]!==e||t[6]!==c){let r;t[8]===c?r=t[9]:(r=e=>new Set(c.map(w)).has(e.id),t[8]=c,t[9]=r),n=e.filter(r),t[5]=e,t[6]=c,t[7]=n}else n=t[7];d=n;break bb0}d=e}let m=d,h,g;t[10]!==m||t[11]!==i||t[12]!==u?(g=i&&m?m.filter(e=>u.includes(e.id)):m,t[10]=m,t[11]=i,t[12]=u,t[13]=g):g=t[13],h=g;let y=h,x,S;if(t[14]!==a||t[15]!==y){let e=a?.replace(/[^0-9a-z]/gi,``).trim();S=y&&e?.length?y.filter(t=>t.name.replace(`-`,``).includes(e.toLowerCase())):y,t[14]=a,t[15]=y,t[16]=S}else S=t[16];x=S;let T=x,E=s||l,D=!!(n??r??i??a),O;return t[17]!==T||t[18]!==E||t[19]!==D?(O={pokemonList:T,isLoading:E,isFiltered:D},t[17]=T,t[18]=E,t[19]=D,t[20]=O):O=t[20],O};function C(e){return e.id}function w(e){return e.id}var T=n(r()),E=n(i());const D=n=>{let r=(0,T.c)(24),{pokemon:i}=n,{id:a,name:o}=i,{data:s}=h(a),[c,l]=(0,x.useState)(!0),u=String(a),d;r[0]===u?d=r[1]:(d={pokemonId:u},r[0]=u,r[1]=d);let f=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/home/${a}.png`,p;r[2]===Symbol.for(`react.memo_cache_sentinel`)?(p=()=>l(!1),r[2]=p):p=r[2];let m;r[3]!==o||r[4]!==f?(m=(0,E.jsx)(`img`,{src:f,alt:o,decoding:`async`,onLoad:p,className:`aspect-square w-full object-contain text-transparent`}),r[3]=o,r[4]=f,r[5]=m):m=r[5];let g;r[6]===c?g=r[7]:(g=c?(0,E.jsx)(`div`,{className:`absolute top-0 aspect-square w-full rounded-xl bg-slate-200 transition-[background-color] group-hover:bg-slate-300 dark:bg-slate-800 dark:group-hover:bg-slate-700`,children:(0,E.jsx)(t,{size:8})}):null,r[6]=c,r[7]=g);let _;r[8]===o?_=r[9]:(_=o.replace(`-`,` `),r[8]=o,r[9]=_);let v;r[10]===_?v=r[11]:(v=(0,E.jsx)(`h1`,{className:`mb-1 text-xl font-bold text-nowrap capitalize max-md:px-1`,children:_}),r[10]=_,r[11]=v);let b=s?.types,S;r[12]===b?S=r[13]:(S=(0,E.jsx)(y,{types:b,className:`-mx-6 scale-75 gap-1 @min-[180px]/card:-mx-7 @min-[200px]/card:-mx-3 @min-[200px]/card:scale-90 @min-[200px]/card:gap-2 @min-[235px]/card:mx-0 @min-[235px]/card:scale-100`}),r[12]=b,r[13]=S);let C;r[14]!==S||r[15]!==v?(C=(0,E.jsxs)(`div`,{className:`p-2 md:p-4`,children:[v,S]}),r[14]=S,r[15]=v,r[16]=C):C=r[16];let w;r[17]!==C||r[18]!==m||r[19]!==g?(w=(0,E.jsxs)(`article`,{className:`group @container/card relative rounded-xl bg-slate-200 shadow-lg transition-[background-color_shadow] hover:bg-slate-300 hover:shadow-xl dark:bg-slate-800 dark:shadow-none dark:hover:bg-slate-700 dark:hover:shadow-none`,children:[m,g,C]}),r[17]=C,r[18]=m,r[19]=g,r[20]=w):w=r[20];let D;return r[21]!==w||r[22]!==d?(D=(0,E.jsx)(e,{to:`/pokemon/$pokemonId`,params:d,children:w}),r[21]=w,r[22]=d,r[23]=D):D=r[23],D};var O=D,k=n(r());const A=()=>{let e=(0,k.c)(17),{data:n,isLoading:r}=m(),{pokemonList:i,isLoading:a,isFiltered:s}=S(n),[c,f]=(0,x.useState)(!1);u(c);let p;e[0]!==c||e[1]!==r||e[2]!==a||e[3]!==i?(p=!r&&!a&&i?.length?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(l,{totalCount:i.length,itemContent:e=>(0,E.jsx)(O,{pokemon:i[e]},i[e].name),useWindowScroll:!0,increaseViewportBy:{top:1e3,bottom:1e3},readyStateChanged:e=>f(e),className:`w-full`,listClassName:`grid grid-cols-2 gap-2 @min-[475px]/grid:gap-4
              @min-[580px]/grid:grid-cols-3 @min-[580px]/grid:gap-2 @min-[680px]/grid:gap-4
              @min-[800px]/grid:grid-cols-4 @min-[800px]/grid:gap-2 @min-[900px]/grid:gap-4
              @min-[1000px]/grid:grid-cols-5 @min-[1000px]/grid:gap-2 @min-[1080px]/grid:gap-4
              @min-[1250px]/grid:grid-cols-6 @min-[1250px]/grid:gap-2 @min-[1300px]/grid:gap-4
              @min-[1400px]/grid:grid-cols-7 @min-[1400px]/grid:gap-2 @min-[1500px]/grid:gap-4`}),c&&(0,E.jsx)(d,{})]}):null,e[0]=c,e[1]=r,e[2]=a,e[3]=i,e[4]=p):p=e[4];let h;e[5]!==c||e[6]!==r||e[7]!==a||e[8]!==i?.length?(h=r||a||!c&&i?.length?(0,E.jsx)(`div`,{className:`fixed top-0 flex h-screen w-full items-center justify-center bg-slate-100 dark:bg-slate-900`,children:(0,E.jsx)(t,{size:24,displaysText:!0})}):null,e[5]=c,e[6]=r,e[7]=a,e[8]=i?.length,e[9]=h):h=e[9];let g;e[10]!==s||e[11]!==i?.length?(g=!i?.length&&s&&(0,E.jsx)(`div`,{className:`top-0 lg:fixed lg:h-screen`,children:(0,E.jsx)(o,{itemType:`Pokémon`})}),e[10]=s,e[11]=i?.length,e[12]=g):g=e[12];let _;return e[13]!==p||e[14]!==h||e[15]!==g?(_=(0,E.jsxs)(`section`,{className:`@container/grid flex flex-col items-center p-4 max-sm:px-2 lg:absolute lg:right-0 lg:w-4/5 lg:max-w-[calc(100vw-248px)] lg:min-w-[calc(100vw-320px)] lg:pl-0`,children:[p,h,g]}),e[13]=p,e[14]=h,e[15]=g,e[16]=_):_=e[16],_};var j=A,M=n(r());const N=()=>{let e=(0,M.c)(3),t=g(P),n;e[0]===t?n=e[1]:(n=[t],e[0]=t,e[1]=n),(0,x.useEffect)(t,n);let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,E.jsxs)(`div`,{className:`relative sm:pt-24`,children:[(0,E.jsxs)(c,{children:[(0,E.jsx)(c.Search,{itemType:`Pokémon`}),(0,E.jsx)(c.GenerationFilter,{}),(0,E.jsx)(c.TypeFilter,{}),(0,E.jsx)(c.OnlyStarredToggle,{}),(0,E.jsx)(c.ClearFilter,{})]}),(0,E.jsx)(s,{}),(0,E.jsx)(j,{})]}),e[2]=r):r=e[2],r};function P(e){return e.resetPokemonDetailsPanels}export{N as component};
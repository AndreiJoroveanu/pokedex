import{c as y,r as w,j as r,L as S,a as F,u as v}from"./index-O6Vd23wt.js";import{u as L,a as T,b as C,S as k,j as _,F as A,c as I}from"./FilterErrorMessage-0YYF3q6E.js";import{u as $,a as z,F as E}from"./Footer-C-amuDqJ.js";import{g as M}from"./CollapsingPanel-ClUqo8hf.js";import{u as q,a as D,P as R}from"./PokemonTypesDisplay-XfcLLeXG.js";const U=()=>{const s=y.c(6),e=G,{data:i,isLoading:t,error:c}=$(e);let d,a;s[0]!==(i==null?void 0:i.results)?(a=i==null?void 0:i.results.map(O),s[0]=i==null?void 0:i.results,s[1]=a):a=s[1],d=a;const x=d;let o;return s[2]!==c||s[3]!==t||s[4]!==x?(o={data:x,isLoading:t,error:c},s[2]=c,s[3]=t,s[4]=x,s[5]=o):o=s[5],o};function G(){return z.getPokemonSpeciesList()}function O(s){return{id:Number(M(s.url)),name:s.name}}const Q=s=>{const{getUrlParam:e}=L(),i=e("generation")??"",t=e("type")??"",c=!!e("onlyStarred"),d=e("q")??"",{data:a,isLoading:x}=T(i),{data:o,isLoading:u}=C(t),{starredPokemonIds:g}=q(),m=w.useMemo(()=>{if(s)return a!=null&&a.length&&(o!=null&&o.length)?a.filter(n=>new Set(o.map(f=>f.id)).has(n.id)):a!=null&&a.length?a:o!=null&&o.length?s.filter(n=>new Set(o.map(f=>f.id)).has(n.id)):s},[s,a,o]),l=w.useMemo(()=>{if(m)return c?m==null?void 0:m.filter(n=>g.includes(n.id)):m},[m,c,g]);return{pokemonList:w.useMemo(()=>{if(l)return d.trim().length?l==null?void 0:l.filter(n=>n.name.includes(d.toLowerCase().trim())):l},[l,d]),isLoading:x||u,isFiltered:!!(i||t||c||d)}},N=w.memo(s=>{const e=y.c(23),{pokemon:i}=s,{id:t,name:c}=i,{data:d}=D(t),[a,x]=w.useState(!0),o=`/pokedex/pokemon/${t}`;let u;e[0]!==d?(u={initialPokemon:d},e[0]=d,e[1]=u):u=e[1];const g=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/home/${t}.png`;let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>x(!1),e[2]=m):m=e[2];let l;e[3]!==c||e[4]!==g?(l=r.jsx("img",{src:g,alt:c,onLoad:m,className:"aspect-square w-full object-contain text-transparent"}),e[3]=c,e[4]=g,e[5]=l):l=e[5];let p;e[6]!==a?(p=a?r.jsx("div",{className:"absolute top-0 aspect-square w-full rounded-sm bg-slate-100 dark:bg-slate-800",children:r.jsx(S,{size:8})}):"",e[6]=a,e[7]=p):p=e[7];let n;e[8]!==c?(n=r.jsx("h1",{className:"mb-1 text-xl font-bold text-nowrap capitalize max-md:px-1",children:c}),e[8]=c,e[9]=n):n=e[9];const f=d==null?void 0:d.types;let h;e[10]!==f?(h=r.jsx(R,{types:f,className:"-mx-6 scale-75 gap-1 @[200px]/card:-mx-3 @[200px]/card:scale-90 @[200px]/card:gap-2"}),e[10]=f,e[11]=h):h=e[11];let j;e[12]!==h||e[13]!==n?(j=r.jsxs("div",{className:"p-2 md:p-4",children:[n,h]}),e[12]=h,e[13]=n,e[14]=j):j=e[14];let b;e[15]!==j||e[16]!==l||e[17]!==p?(b=r.jsxs("article",{className:"@container/card relative rounded-sm border border-slate-400/40 bg-slate-100 shadow-lg transition-colors hover:bg-slate-200/75 hover:shadow-xl dark:bg-slate-800 dark:shadow-none dark:hover:bg-slate-700/75 dark:hover:shadow-none",children:[l,p,j]}),e[15]=j,e[16]=l,e[17]=p,e[18]=b):b=e[18];let P;return e[19]!==b||e[20]!==o||e[21]!==u?(P=r.jsx(F,{to:o,state:u,children:b}),e[19]=b,e[20]=o,e[21]=u,e[22]=P):P=e[22],P});N.displayName="PokemonCard";const X=()=>{const s=y.c(15),{data:e,isLoading:i}=U(),{pokemonList:t,isLoading:c,isFiltered:d}=Q(e),[a,x]=w.useState(!1);v(a);let o,u;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsxs(k,{children:[r.jsx(k.Search,{itemType:"Pokémon"}),r.jsx(k.GenerationFilter,{}),r.jsx(k.TypeFilter,{}),r.jsx(k.OnlyStarredToggle,{}),r.jsx(k.ClearFilter,{})]}),u=r.jsx(I,{}),s[0]=o,s[1]=u):(o=s[0],u=s[1]);let g;s[2]!==c||s[3]!==i||s[4]!==t?(g=!i&&!c?t!=null&&t.length?r.jsx(_,{totalCount:t.length,itemContent:n=>r.jsx(N,{pokemon:t[n]},t[n].name),useWindowScroll:!0,increaseViewportBy:{top:1e3,bottom:1e3},components:{Footer:V},readyStateChanged:n=>x(n),className:"w-full",listClassName:"grid z-0 grid-cols-2 gap-2 @[500px]/grid:gap-4 @[600px]/grid:grid-cols-3 @[800px]/grid:grid-cols-4 @[1000px]/grid:grid-cols-5 @[1200px]/grid:grid-cols-6"}):null:r.jsx("div",{className:"fixed top-0 flex h-screen w-full items-center justify-center bg-slate-50 dark:bg-slate-900",children:r.jsx(S,{size:24,displaysText:!0})}),s[2]=c,s[3]=i,s[4]=t,s[5]=g):g=s[5];let m;s[6]!==a?(m=!a&&r.jsx("div",{className:"fixed top-0 flex h-screen w-full items-center justify-center bg-slate-50 dark:bg-slate-900",children:r.jsx(S,{size:24,displaysText:!0})}),s[6]=a,s[7]=m):m=s[7];let l;s[8]!==d||s[9]!==(t==null?void 0:t.length)?(l=!(t!=null&&t.length)&&d&&r.jsx("div",{className:"top-0 lg:fixed lg:h-screen",children:r.jsx(A,{itemType:"Pokémon"})}),s[8]=d,s[9]=t==null?void 0:t.length,s[10]=l):l=s[10];let p;return s[11]!==g||s[12]!==m||s[13]!==l?(p=r.jsxs("div",{className:"relative pt-18 sm:pt-24",children:[o,u,r.jsxs("section",{className:"@container/grid flex flex-col items-center p-4 max-sm:px-2 lg:absolute lg:right-0 lg:w-4/5 lg:max-w-[calc(100vw-248px)]",children:[g,m,l]})]}),s[11]=g,s[12]=m,s[13]=l,s[14]=p):p=s[14],p};function V(){return r.jsx(E,{className:"pb-4"})}export{X as default};

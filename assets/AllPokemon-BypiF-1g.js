import{c as w,r as k,j as r,L as N,a as F,u as L,b as v}from"./index-D-z4R4ay.js";import{u as C,a as T,b as _,S as P,j as A,F as $,c as I}from"./FilterErrorMessage-CNqnN0uq.js";import{u as D,a as E,F as M}from"./Footer-DvNgcQiO.js";import{g as q}from"./CollapsingPanel-s0RzYb3R.js";import{u as z,a as R,P as U}from"./PokemonTypesDisplay-DsbXmYyQ.js";const G=()=>{const e=w.c(6),s=O,{data:n,isLoading:t,error:l}=D(s);let m,a;e[0]!==(n==null?void 0:n.results)?(a=n==null?void 0:n.results.map(Q),e[0]=n==null?void 0:n.results,e[1]=a):a=e[1],m=a;const x=m;let o;return e[2]!==l||e[3]!==t||e[4]!==x?(o={data:x,isLoading:t,error:l},e[2]=l,e[3]=t,e[4]=x,e[5]=o):o=e[5],o};function O(){return E.getPokemonSpeciesList()}function Q(e){return{id:Number(q(e.url)),name:e.name}}const V=e=>{const{getUrlParam:s}=C(),n=s("generation")??"",t=s("type")??"",l=!!s("onlyStarred"),m=s("q")??"",{data:a,isLoading:x}=T(n),{data:o,isLoading:u}=_(t),{starredPokemonIds:g}=z(),d=k.useMemo(()=>{if(e)return a!=null&&a.length&&(o!=null&&o.length)?a.filter(c=>new Set(o.map(h=>h.id)).has(c.id)):a!=null&&a.length?a:o!=null&&o.length?e.filter(c=>new Set(o.map(h=>h.id)).has(c.id)):e},[e,a,o]),i=k.useMemo(()=>{if(d)return l?d==null?void 0:d.filter(c=>g.includes(c.id)):d},[d,l,g]);return{pokemonList:k.useMemo(()=>{if(i)return m.trim().length?i==null?void 0:i.filter(c=>c.name.includes(m.toLowerCase().trim())):i},[i,m]),isLoading:x||u,isFiltered:!!(n||t||l||m)}},y=k.memo(e=>{const s=w.c(23),{pokemon:n}=e,{id:t,name:l}=n,{data:m}=R(t),[a,x]=k.useState(!0),o=`/pokedex/pokemon/${t}`;let u;s[0]!==m?(u={initialPokemon:m},s[0]=m,s[1]=u):u=s[1];const g=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/home/${t}.png`;let d;s[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>x(!1),s[2]=d):d=s[2];let i;s[3]!==l||s[4]!==g?(i=r.jsx("img",{src:g,alt:l,onLoad:d,className:"aspect-square w-full object-contain text-transparent"}),s[3]=l,s[4]=g,s[5]=i):i=s[5];let p;s[6]!==a?(p=a?r.jsx("div",{className:"absolute top-0 aspect-square w-full rounded-sm bg-slate-100 dark:bg-slate-800",children:r.jsx(N,{size:8})}):"",s[6]=a,s[7]=p):p=s[7];let c;s[8]!==l?(c=r.jsx("h1",{className:"mb-1 text-xl font-bold text-nowrap capitalize max-md:px-1",children:l}),s[8]=l,s[9]=c):c=s[9];const h=m==null?void 0:m.types;let f;s[10]!==h?(f=r.jsx(U,{types:h,className:"-mx-6 scale-75 gap-1 @min-[180px]/card:-mx-7 @min-[200px]/card:-mx-3 @min-[200px]/card:scale-90 @min-[200px]/card:gap-2 @min-[235px]/card:mx-0 @min-[235px]/card:scale-100"}),s[10]=h,s[11]=f):f=s[11];let j;s[12]!==f||s[13]!==c?(j=r.jsxs("div",{className:"p-2 md:p-4",children:[c,f]}),s[12]=f,s[13]=c,s[14]=j):j=s[14];let b;s[15]!==j||s[16]!==i||s[17]!==p?(b=r.jsxs("article",{className:"@container/card relative rounded-sm border border-slate-400/40 bg-slate-100 shadow-lg transition-colors hover:bg-slate-200/75 hover:shadow-xl dark:bg-slate-800 dark:shadow-none dark:hover:bg-slate-700/75 dark:hover:shadow-none",children:[i,p,j]}),s[15]=j,s[16]=i,s[17]=p,s[18]=b):b=s[18];let S;return s[19]!==b||s[20]!==o||s[21]!==u?(S=r.jsx(F,{to:o,state:u,children:b}),s[19]=b,s[20]=o,s[21]=u,s[22]=S):S=s[22],S});y.displayName="PokemonCard";const Z=()=>{const e=w.c(17),{data:s,isLoading:n}=G(),{pokemonList:t,isLoading:l,isFiltered:m}=V(s);L(W)();const[a,x]=k.useState(!1);v(a);let o,u;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsxs(P,{children:[r.jsx(P.Search,{itemType:"Pokémon"}),r.jsx(P.GenerationFilter,{}),r.jsx(P.TypeFilter,{}),r.jsx(P.OnlyStarredToggle,{}),r.jsx(P.ClearFilter,{})]}),u=r.jsx(I,{}),e[0]=o,e[1]=u):(o=e[0],u=e[1]);let g;e[2]!==l||e[3]!==n||e[4]!==t?(g=!n&&!l&&(t!=null&&t.length)?r.jsx(A,{totalCount:t.length,itemContent:c=>r.jsx(y,{pokemon:t[c]},t[c].name),useWindowScroll:!0,increaseViewportBy:{top:1e3,bottom:1e3},components:{Footer:B},readyStateChanged:c=>x(c),className:"w-full",listClassName:"grid grid-cols-2 gap-2 @min-[500px]/grid:gap-4 @min-[600px]/grid:grid-cols-3 @min-[800px]/grid:grid-cols-4 @min-[1000px]/grid:grid-cols-5 @min-[1200px]/grid:grid-cols-6"}):null,e[2]=l,e[3]=n,e[4]=t,e[5]=g):g=e[5];let d;e[6]!==a||e[7]!==l||e[8]!==n?(d=(n||l||!a)&&r.jsx("div",{className:"fixed top-0 flex h-screen w-full items-center justify-center bg-slate-50 dark:bg-slate-900",children:r.jsx(N,{size:24,displaysText:!0})}),e[6]=a,e[7]=l,e[8]=n,e[9]=d):d=e[9];let i;e[10]!==m||e[11]!==(t==null?void 0:t.length)?(i=!(t!=null&&t.length)&&m&&r.jsx("div",{className:"top-0 lg:fixed lg:h-screen",children:r.jsx($,{itemType:"Pokémon"})}),e[10]=m,e[11]=t==null?void 0:t.length,e[12]=i):i=e[12];let p;return e[13]!==g||e[14]!==d||e[15]!==i?(p=r.jsxs("div",{className:"relative pt-18 sm:pt-24",children:[o,u,r.jsxs("section",{className:"@container/grid flex flex-col items-center p-4 max-sm:px-2 lg:absolute lg:right-0 lg:w-4/5 lg:max-w-[calc(100vw-248px)]",children:[g,d,i]})]}),e[13]=g,e[14]=d,e[15]=i,e[16]=p):p=e[16],p};function W(e){return e.resetPokemonDetailsPanels}function B(){return r.jsx(M,{className:"pb-4"})}export{Z as default};

import{r as f,c as b,j as a,L as w,a as N,b as M}from"./index-DZrJteeJ.js";import{S as h,j as y,F,a as k}from"./FilterErrorMessage-DIlJBWsb.js";import{h as S,i as C,d as A,j as T,F as $}from"./Footer-BrpHMrdV.js";import{u as E}from"./useStarredPokemon-_qlx21Jw.js";import{t as j,a as I,M as _}from"./MoveInfoDisplay-GOCuZ7VJ.js";import"./MoveCategoryDisplay-CGhGfHkm.js";const z=e=>{const{getUrlParam:s}=E(),g=s("generation")??"",t=s("type")??"",i=s("q")??"",{data:l,isLoading:x}=S(g),{data:r,isLoading:m}=C(t),n=f.useMemo(()=>{if(e)return l!=null&&l.length&&(r!=null&&r.length)?l.filter(o=>new Set(r.map(c=>c.id)).has(o.id)):l!=null&&l.length?l:r!=null&&r.length?r:e},[e,l,r]);return{moveList:f.useMemo(()=>{if(n)return i.trim().length?n==null?void 0:n.filter(o=>o.name.includes(i.toLowerCase().trim())):n},[n,i]),isLoading:x||m,isFiltered:!!(g||t||i)}},v=f.memo(e=>{const s=b.c(17),{move:g}=e,{id:t,name:i}=g,{data:l}=A(t),x=`/pokedex/moves/${t}`;let r;s[0]!==l?(r=l?a.jsx("div",{className:"-m-7 inline-block h-34.25 w-33 scale-40",style:{backgroundImage:`url(${I})`,backgroundPosition:`${j[l.type.name].sprite.x}px ${j[l.type.name].sprite.y}px`}}):a.jsx("div",{className:"-m-7 inline-block h-34.25 w-33",children:a.jsx(w,{size:8})}),s[0]=l,s[1]=r):r=s[1];let m;s[2]!==i?(m=i.split("-").join(" "),s[2]=i,s[3]=m):m=s[3];let n;s[4]!==m?(n=a.jsx("h1",{className:"my-1 overflow-scroll px-1 text-lg font-bold text-nowrap capitalize",children:m}),s[4]=m,s[5]=n):n=s[5];let d;s[6]!==l?(d=a.jsx(_,{move:l,className:"-mx-6 -my-1 scale-75 @min-[275px]/card:-mx-2 @min-[275px]/card:scale-90 @min-[300px]/card:m-1 @min-[300px]/card:scale-100"}),s[6]=l,s[7]=d):d=s[7];let o;s[8]!==n||s[9]!==d?(o=a.jsxs("div",{className:"w-[calc(100%-76px)]",children:[n,d]}),s[8]=n,s[9]=d,s[10]=o):o=s[10];let c;s[11]!==r||s[12]!==o?(c=a.jsx("article",{className:"@container/card relative rounded-xl bg-slate-200 shadow-lg transition-[background-color_shadow] hover:bg-slate-300 hover:shadow-xl dark:bg-slate-800 dark:shadow-none dark:hover:bg-slate-700 dark:hover:shadow-none",children:a.jsxs("div",{className:"flex",children:[r,o]})}),s[11]=r,s[12]=o,s[13]=c):c=s[13];let p;return s[14]!==x||s[15]!==c?(p=a.jsx(N,{to:x,children:c}),s[14]=x,s[15]=c,s[16]=p):p=s[16],p});v.displayName="MoveCard";const U=()=>{const e=b.c(18),{data:s,isLoading:g}=T(),{moveList:t,isLoading:i,isFiltered:l}=z(s),[x,r]=f.useState(!1);M(x);let m,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=a.jsxs(h,{children:[a.jsx(h.Search,{itemType:"move"}),a.jsx(h.GenerationFilter,{}),a.jsx(h.TypeFilter,{}),a.jsx(h.ClearFilter,{})]}),n=a.jsx(k,{}),e[0]=m,e[1]=n):(m=e[0],n=e[1]);let d;e[2]!==i||e[3]!==g||e[4]!==t?(d=!g&&!i&&(t!=null&&t.length)?a.jsx(y,{totalCount:t.length,itemContent:u=>a.jsx(v,{move:t[u]},t[u].name),useWindowScroll:!0,increaseViewportBy:{top:1e3,bottom:1e3},components:{Footer:D},readyStateChanged:u=>r(u),className:"w-full",listClassName:"grid grid-cols-1 gap-2 @min-[600px]/grid:gap-4 @min-[600px]/grid:grid-cols-2 @min-[800px]/grid:grid-cols-3 @min-[1000px]/grid:grid-cols-4 @min-[1200px]/grid:grid-cols-5"}):null,e[2]=i,e[3]=g,e[4]=t,e[5]=d):d=e[5];let o;e[6]!==x||e[7]!==i||e[8]!==g||e[9]!==(t==null?void 0:t.length)?(o=g||i||!x&&(t!=null&&t.length)?a.jsx("div",{className:"fixed top-0 flex h-screen w-full items-center justify-center bg-slate-100 dark:bg-slate-900",children:a.jsx(w,{size:24,displaysText:!0})}):null,e[6]=x,e[7]=i,e[8]=g,e[9]=t==null?void 0:t.length,e[10]=o):o=e[10];let c;e[11]!==l||e[12]!==(t==null?void 0:t.length)?(c=!(t!=null&&t.length)&&l&&a.jsx("div",{className:"top-0 lg:fixed lg:h-screen",children:a.jsx(F,{itemType:"moves"})}),e[11]=l,e[12]=t==null?void 0:t.length,e[13]=c):c=e[13];let p;return e[14]!==d||e[15]!==o||e[16]!==c?(p=a.jsxs("div",{className:"relative sm:pt-24",children:[m,n,a.jsxs("section",{className:"@container/grid flex flex-col items-center p-4 max-sm:px-2 lg:absolute lg:right-0 lg:w-4/5 lg:max-w-[calc(100vw-248px)] lg:pl-0",children:[d,o,c]})]}),e[14]=d,e[15]=o,e[16]=c,e[17]=p):p=e[17],p};function D(){return a.jsx($,{className:"pb-20 sm:pb-4"})}export{U as default};

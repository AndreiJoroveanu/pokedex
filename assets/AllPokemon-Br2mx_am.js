import{c as S,r as P,j as a,L as N,a as F,u as L}from"./index-Dy0eyPaw.js";import{u as v,a as C,b as T,S as k,j as _,F as A,c as I}from"./FilterErrorMessage-C3hJhVar.js";import{u as $,a as E,F as M}from"./Footer-D6YWUvTW.js";import{g as q}from"./CollapsingPanel-2oD-LWct.js";import{u as z,a as D,P as R}from"./PokemonTypesDisplay-CQB_f6LF.js";const U=()=>{const e=S.c(6),s=G,{data:n,isLoading:t,error:l}=$(s);let m,r;e[0]!==(n==null?void 0:n.results)?(r=n==null?void 0:n.results.map(O),e[0]=n==null?void 0:n.results,e[1]=r):r=e[1],m=r;const x=m;let o;return e[2]!==l||e[3]!==t||e[4]!==x?(o={data:x,isLoading:t,error:l},e[2]=l,e[3]=t,e[4]=x,e[5]=o):o=e[5],o};function G(){return E.getPokemonSpeciesList()}function O(e){return{id:Number(q(e.url)),name:e.name}}const Q=e=>{const{getUrlParam:s}=v(),n=s("generation")??"",t=s("type")??"",l=!!s("onlyStarred"),m=s("q")??"",{data:r,isLoading:x}=C(n),{data:o,isLoading:g}=T(t),{starredPokemonIds:u}=z(),d=P.useMemo(()=>{if(e)return r!=null&&r.length&&(o!=null&&o.length)?r.filter(c=>new Set(o.map(h=>h.id)).has(c.id)):r!=null&&r.length?r:o!=null&&o.length?e.filter(c=>new Set(o.map(h=>h.id)).has(c.id)):e},[e,r,o]),i=P.useMemo(()=>{if(d)return l?d==null?void 0:d.filter(c=>u.includes(c.id)):d},[d,l,u]);return{pokemonList:P.useMemo(()=>{if(i)return m.trim().length?i==null?void 0:i.filter(c=>c.name.includes(m.toLowerCase().trim())):i},[i,m]),isLoading:x||g,isFiltered:!!(n||t||l||m)}},y=P.memo(e=>{const s=S.c(23),{pokemon:n}=e,{id:t,name:l}=n,{data:m}=D(t),[r,x]=P.useState(!0),o=`/pokedex/pokemon/${t}`;let g;s[0]!==m?(g={initialPokemon:m},s[0]=m,s[1]=g):g=s[1];const u=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/home/${t}.png`;let d;s[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>x(!1),s[2]=d):d=s[2];let i;s[3]!==l||s[4]!==u?(i=a.jsx("img",{src:u,alt:l,onLoad:d,className:"aspect-square w-full object-contain text-transparent"}),s[3]=l,s[4]=u,s[5]=i):i=s[5];let p;s[6]!==r?(p=r?a.jsx("div",{className:"absolute top-0 aspect-square w-full rounded-sm bg-slate-100 dark:bg-slate-800",children:a.jsx(N,{size:8})}):"",s[6]=r,s[7]=p):p=s[7];let c;s[8]!==l?(c=a.jsx("h1",{className:"mb-1 text-xl font-bold text-nowrap capitalize max-md:px-1",children:l}),s[8]=l,s[9]=c):c=s[9];const h=m==null?void 0:m.types;let f;s[10]!==h?(f=a.jsx(R,{types:h,className:"-mx-6 scale-75 gap-1 @min-[180px]/card:-mx-7 @min-[200px]/card:-mx-3 @min-[200px]/card:scale-90 @min-[200px]/card:gap-2 @min-[235px]/card:mx-0 @min-[235px]/card:scale-100"}),s[10]=h,s[11]=f):f=s[11];let j;s[12]!==f||s[13]!==c?(j=a.jsxs("div",{className:"p-2 md:p-4",children:[c,f]}),s[12]=f,s[13]=c,s[14]=j):j=s[14];let b;s[15]!==j||s[16]!==i||s[17]!==p?(b=a.jsxs("article",{className:"@container/card relative rounded-sm border border-slate-400/40 bg-slate-100 shadow-lg transition-colors hover:bg-slate-200/75 hover:shadow-xl dark:bg-slate-800 dark:shadow-none dark:hover:bg-slate-700/75 dark:hover:shadow-none",children:[i,p,j]}),s[15]=j,s[16]=i,s[17]=p,s[18]=b):b=s[18];let w;return s[19]!==b||s[20]!==o||s[21]!==g?(w=a.jsx(F,{to:o,state:g,children:b}),s[19]=b,s[20]=o,s[21]=g,s[22]=w):w=s[22],w});y.displayName="PokemonCard";const X=()=>{const e=S.c(17),{data:s,isLoading:n}=U(),{pokemonList:t,isLoading:l,isFiltered:m}=Q(s),[r,x]=P.useState(!1);L(r);let o,g;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsxs(k,{children:[a.jsx(k.Search,{itemType:"Pokémon"}),a.jsx(k.GenerationFilter,{}),a.jsx(k.TypeFilter,{}),a.jsx(k.OnlyStarredToggle,{}),a.jsx(k.ClearFilter,{})]}),g=a.jsx(I,{}),e[0]=o,e[1]=g):(o=e[0],g=e[1]);let u;e[2]!==l||e[3]!==n||e[4]!==t?(u=!n&&!l&&(t!=null&&t.length)?a.jsx(_,{totalCount:t.length,itemContent:c=>a.jsx(y,{pokemon:t[c]},t[c].name),useWindowScroll:!0,increaseViewportBy:{top:1e3,bottom:1e3},components:{Footer:V},readyStateChanged:c=>x(c),className:"w-full",listClassName:"grid grid-cols-2 gap-2 @min-[500px]/grid:gap-4 @min-[600px]/grid:grid-cols-3 @min-[800px]/grid:grid-cols-4 @min-[1000px]/grid:grid-cols-5 @min-[1200px]/grid:grid-cols-6"}):null,e[2]=l,e[3]=n,e[4]=t,e[5]=u):u=e[5];let d;e[6]!==r||e[7]!==l||e[8]!==n?(d=(n||l||!r)&&a.jsx("div",{className:"fixed top-0 flex h-screen w-full items-center justify-center bg-slate-50 dark:bg-slate-900",children:a.jsx(N,{size:24,displaysText:!0})}),e[6]=r,e[7]=l,e[8]=n,e[9]=d):d=e[9];let i;e[10]!==m||e[11]!==(t==null?void 0:t.length)?(i=!(t!=null&&t.length)&&m&&a.jsx("div",{className:"top-0 lg:fixed lg:h-screen",children:a.jsx(A,{itemType:"Pokémon"})}),e[10]=m,e[11]=t==null?void 0:t.length,e[12]=i):i=e[12];let p;return e[13]!==u||e[14]!==d||e[15]!==i?(p=a.jsxs("div",{className:"relative pt-18 sm:pt-24",children:[o,g,a.jsxs("section",{className:"@container/grid flex flex-col items-center p-4 max-sm:px-2 lg:absolute lg:right-0 lg:w-4/5 lg:max-w-[calc(100vw-248px)]",children:[u,d,i]})]}),e[13]=u,e[14]=d,e[15]=i,e[16]=p):p=e[16],p};function V(){return a.jsx(M,{className:"pb-4"})}export{X as default};

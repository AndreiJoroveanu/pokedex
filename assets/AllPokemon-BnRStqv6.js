import{r as m,u as U,j as t,a as j,b as F,L as O,c as L}from"./index-DUkXUVjj.js";import{a as $,u as P,b as S,C as z,B as h,c as E,P as D,F as M}from"./Footer-DTgt1mqW.js";function q({title:e,titleId:r,...s},d){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":r},s),e?m.createElement("title",{id:r},e):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"}))}const A=m.forwardRef(q);function R({title:e,titleId:r,...s},d){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":r},s),e?m.createElement("title",{id:r},e):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"}))}const T=m.forwardRef(R),G=()=>{const e=m.useCallback(()=>$.getPokemonSpeciesList(),[]),{data:r,isLoading:s,error:d}=P(e);return{data:m.useMemo(()=>r==null?void 0:r.results.map(a=>({id:Number(a.url.split("https://pokeapi.co/api/v2/pokemon-species/")[1].split("/")[0]),name:a.name})),[r]),isLoading:s,error:d}},k=()=>{const[e,r]=U(),s=o=>e.get(o);return{getUrl:s,setUrl:(o,a)=>{s(o)===a||a===""?e.delete(o):e.set(o,a),o!=="page"&&e.get("page")&&e.delete("page");const n=new URLSearchParams;["page","generation","type","onlyStarred","q"].map(c=>{const l=e.get(c);l&&n.set(c,l)}),r(n)}}},I=e=>{const r=m.useCallback(()=>{if(e)return $.getGenerationByName(`generation-${e}`)},[e]),{data:s,isLoading:d,error:o}=P(r);return{data:m.useMemo(()=>e?(s==null?void 0:s.pokemon_species.map(n=>({id:Number(n.url.split("https://pokeapi.co/api/v2/pokemon-species/")[1].split("/")[0]),name:n.name})).filter(n=>n.id<1e4).sort((n,i)=>n.id-i.id))??[]:[],[s==null?void 0:s.pokemon_species,e]),isLoading:d,error:o}},B=e=>{const r=m.useCallback(()=>{if(e)return $.getTypeByName(e)},[e]),{data:s,isLoading:d,error:o}=P(r);return{data:m.useMemo(()=>e?(s==null?void 0:s.pokemon.map(n=>({id:Number(n.pokemon.url.split("https://pokeapi.co/api/v2/pokemon/")[1].split("/")[0]),name:n.pokemon.name})).filter(n=>n.id<1e4))??[]:[],[s==null?void 0:s.pokemon,e]),isLoading:d,error:o}},_=e=>{const{getUrl:r}=k(),s=r("generation")??"",d=r("type")??"",o=!!r("onlyStarred"),a=r("q")??"",{data:n,isLoading:i}=I(s),{data:c,isLoading:l}=B(d),{starredPokemon:x}=S(),f=m.useMemo(()=>{if(e)return n!=null&&n.length&&(c!=null&&c.length)?n.filter(p=>new Set(c.map(w=>w.id)).has(p.id)):n!=null&&n.length?n:c!=null&&c.length?e.filter(p=>new Set(c.map(w=>w.id)).has(p.id)):e},[e,n,c]),b=m.useMemo(()=>{if(f)return o?f==null?void 0:f.filter(p=>x.includes(p.name)):f},[f,o,x]);return{pokemonList:m.useMemo(()=>{if(b)return a.trim().length?b==null?void 0:b.filter(p=>p.name.includes(a.toLowerCase().trim())):b},[b,a]),isLoading:i||l,isFiltered:!!(s||d||o||a)}},g="https://pokeapi.co/api/v2/generation",v=[{name:"generation-i",url:`${g}/1/`},{name:"generation-ii",url:`${g}/2/`},{name:"generation-iii",url:`${g}/3/`},{name:"generation-iv",url:`${g}/4/`},{name:"generation-v",url:`${g}/5/`},{name:"generation-vi",url:`${g}/6/`},{name:"generation-vii",url:`${g}/7/`},{name:"generation-viii",url:`${g}/8/`},{name:"generation-ix",url:`${g}/9/`}],u="https://pokeapi.co/api/v2/type",y=[{name:"normal",url:`${u}/1/`},{name:"fighting",url:`${u}/2/`},{name:"flying",url:`${u}/3/`},{name:"poison",url:`${u}/4/`},{name:"ground",url:`${u}/5/`},{name:"rock",url:`${u}/6/`},{name:"bug",url:`${u}/7/`},{name:"ghost",url:`${u}/8/`},{name:"steel",url:`${u}/9/`},{name:"fire",url:`${u}/10/`},{name:"water",url:`${u}/11/`},{name:"grass",url:`${u}/12/`},{name:"electric",url:`${u}/13/`},{name:"psychic",url:`${u}/14/`},{name:"ice",url:`${u}/15/`},{name:"dragon",url:`${u}/16/`},{name:"dark",url:`${u}/17/`},{name:"fairy",url:`${u}/18/`}],W=()=>{const[e,r]=m.useState(""),{getUrl:s,setUrl:d}=k();m.useEffect(()=>r(s("q")??""),[s]);const o=a=>{r(a),d("q",a)};return t.jsx("input",{type:"text",placeholder:"Search by Pokémon name",value:e,onChange:a=>o(a.target.value),className:"w-full rounded-xl border border-slate-400/70 bg-slate-100 py-2 text-center shadow-md transition-colors hover:bg-slate-200/75 hover:shadow-lg focus:shadow-lg dark:bg-slate-800 dark:shadow-none dark:hover:bg-slate-700/75 dark:hover:shadow-none dark:focus:shadow-none"})},C=({name:e,values:r,renderLabel:s,isOpen:d,toggleOpen:o})=>{const{getUrl:a,setUrl:n}=k();return t.jsx(z,{label:`${e} Filtering`,initialIsOpen:d,toggleOpen:o,className:"grid grid-cols-3 gap-2 p-2 lg:grid-cols-2 xl:grid-cols-3",children:r==null?void 0:r.map(i=>t.jsx(h,{onClick:()=>n(e,i),style:a(e)===i?"indigo":"normal",className:"capitalize",children:s(i)},i))})},K=()=>{const e=j(l=>l.isGenFilterOpen),r=j(l=>l.toggleGenFilterOpen),s=j(l=>l.isTypeFilterOpen),d=j(l=>l.toggleTypeFilterOpen),o=F(),{getUrl:a,setUrl:n}=k(),i=!a("generation")&&!a("type")&&!a("onlyStarred")&&!a("q"),{length:c}=S();return t.jsxs("aside",{className:"p-4 max-lg:pb-0 lg:fixed lg:h-[calc(100vh-96px)] lg:w-1/5 lg:overflow-y-scroll lg:border-r lg:border-slate-400 dark:lg:border-slate-600",children:[t.jsx(W,{}),t.jsx(C,{name:"generation",values:v==null?void 0:v.map(l=>l.name.split("-")[1]),renderLabel:l=>`Gen. ${l.toUpperCase()}`,isOpen:e,toggleOpen:r}),t.jsx(C,{name:"type",values:y==null?void 0:y.map(l=>l.name),renderLabel:l=>l,isOpen:s,toggleOpen:d}),t.jsxs(h,{onClick:()=>n("onlyStarred","true"),style:a("onlyStarred")?"gold":"normal",className:"mb-4 w-full",children:["Show",a("onlyStarred")?`ing ${c}`:" only"," starred Pokémon"]}),t.jsx(h,{onClick:()=>void o("/pokedex/pokemon"),disabled:i,style:i?"normal":"indigo",className:"w-full disabled:cursor-not-allowed disabled:opacity-25 lg:mb-4",children:"Clear Filtering"})]})},Q=({noOfPages:e,noOfSideButtons:r})=>{const{getUrl:s,setUrl:d}=k(),o=Number(s("page"))||1,a=i=>d("page",i.toString()),n=()=>{const i=[];let c=0;for(let l=o-r;l<=o+r;l++)c--,i.push(l>0&&l<=e?l:c);return i};return t.jsxs("div",{className:"flex gap-2 sm:gap-4",children:[t.jsx(h,{onClick:()=>a(1),disabled:o===1,className:"xs:size-12 flex size-8 items-center justify-center rounded-full disabled:cursor-not-allowed disabled:opacity-25",children:t.jsx(A,{className:"size-4"})}),n().map((i,c)=>i>0?t.jsx(h,{onClick:()=>a(i),disabled:i===o,style:i===o?"indigo":"normal",className:`xs:size-12 ${c===0||c===r*2?"max-sm:hidden":""} flex size-8 items-center justify-center rounded-full disabled:cursor-default`,children:i},i):t.jsx("div",{className:`xs:size-12 ${c===0||c===r*2?"max-sm:hidden":""} size-8`},i)),t.jsx(h,{onClick:()=>a(e),disabled:o===e,className:"xs:size-12 flex size-8 items-center justify-center rounded-full disabled:cursor-not-allowed disabled:opacity-25",children:t.jsx(T,{className:"size-4"})})]})},H=({type:e})=>{const r=F();return t.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-8 text-center lg:h-screen",children:[t.jsxs("h2",{className:"text-3xl font-bold",children:["No ",e," Found"]}),t.jsx("p",{className:"mb-2 font-semibold text-slate-600 dark:text-slate-400",children:"Try other filtering options or another search query"}),t.jsx(h,{onClick:()=>void r("/pokedex/pokemon"),style:"indigo",className:"w-full max-lg:hidden",children:"Clear Filtering"})]})},J=({id:e,name:r})=>{const{data:s}=E(e),[d,o]=m.useState(!0);return t.jsx(O,{to:`/pokedex/pokemon/${r}`,state:{initialPokemon:s},children:t.jsxs("article",{className:"relative rounded-sm border border-slate-400/40 bg-slate-100 shadow-lg transition-colors hover:bg-slate-200/75 hover:shadow-xl dark:bg-slate-800 dark:shadow-none dark:hover:bg-slate-700/75 dark:hover:shadow-none",children:[t.jsx("img",{src:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/home/${e}.png`,alt:r,onLoad:()=>o(!1),className:"aspect-square w-full object-contain text-transparent dark:brightness-90"}),d?t.jsx("div",{className:"absolute top-0 aspect-square w-full rounded-sm bg-slate-100 dark:bg-slate-800",children:t.jsx(L,{size:8})}):"",t.jsxs("div",{className:"px-3 py-2 md:p-4",children:[t.jsxs("h1",{className:"text-base font-bold text-nowrap capitalize sm:text-lg md:text-xl",children:[e,". ",r]}),t.jsx(D,{types:s==null?void 0:s.types,className:"text-sm font-semibold text-nowrap text-slate-500 md:text-base dark:text-slate-400"})]})]})})},N=20,Z=()=>{const{data:e,isLoading:r}=G(),{pokemonList:s,isLoading:d,isFiltered:o}=_(e),a=(s==null?void 0:s.length)??0,n=Math.ceil(a/N),{getUrl:i}=k(),c=Number(i("page"))||1,l=m.useMemo(()=>s==null?void 0:s.slice((c-1)*N,c*N),[c,s]);return t.jsxs("div",{className:"relative pt-18 sm:pt-24",children:[t.jsx(K,{}),t.jsxs("section",{className:"flex w-full flex-col items-center p-4 max-sm:px-2 lg:absolute lg:right-0 lg:w-4/5",children:[!r&&!d?t.jsxs(t.Fragment,{children:[n>1&&t.jsx(Q,{noOfPages:n,noOfSideButtons:3}),l!=null&&l.length?t.jsxs(t.Fragment,{children:[t.jsx("main",{className:"mt-4 grid w-full grid-cols-2 gap-2 sm:gap-4 md:grid-cols-4 xl:grid-cols-5",children:l.map(x=>t.jsx(J,{id:x.id,name:x.name},x.name))}),t.jsx(M,{})]}):null]}):t.jsx("div",{className:"fixed top-0 flex h-screen w-full items-center justify-center bg-slate-50 lg:-z-10 dark:bg-slate-900",children:t.jsx(L,{size:24,displaysText:!0})}),!(s!=null&&s.length)&&o&&t.jsx("div",{className:"top-0 lg:fixed lg:h-screen",children:t.jsx(H,{type:"Pokémon"})})]})]})};export{Z as default};
